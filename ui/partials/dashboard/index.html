<!-- Dashboard Content - extracted from dashboard.html -->
<style>
    /* Dashboard-specific styles */


    .brand-logo {
        margin-bottom: 2rem;
    }



    .service-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 2rem;
    }

    .service-card {
        background: var(--white);
        border-radius: var(--border-radius-lg);
        box-shadow: var(--shadow-light);
        padding: 2rem;
        text-align: center;
        transition: var(--transition);
        cursor: pointer;
        border: 2px solid transparent;
    }

    .service-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-heavy);
        border-color: var(--primary-color);
    }

    .service-icon {
        font-size: 3rem;
        margin-bottom: 1.5rem;
        color: var(--primary-color);
    }

    .service-title {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 1rem;
        color: var(--dark-color);
    }

    .service-description {
        color: var(--secondary-color);
        margin-bottom: 1.5rem;
        line-height: 1.6;
    }

    .service-status {
        display: inline-flex;
        align-items: center;
        padding: 0.5rem 1rem;
        border-radius: var(--border-radius);
        font-size: 0.9rem;
        font-weight: 500;
    }

    .status-online {
        background: var(--success-light);
        color: var(--success-color);
    }

    .status-offline {
        background: var(--danger-light);
        color: var(--danger-color);
    }

    .status-loading {
        background: var(--warning-light);
        color: var(--warning-color);
    }

            /* Mobile responsiveness */
        @media (max-width: 768px) {
            .service-cards {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .service-card {
                padding: 1.5rem;
            }
        }
</style>


<!-- Service Cards Grid -->
<div class="service-cards">
    <!-- Orders Service -->
    <div class="service-card" onclick="navigateToRoute('orders')">

        <h3 class="service-title">Orders Management</h3>
        <p class="service-description">
            Process ice cream orders, track customer preferences, and manage flavor selections
        </p>
        <div class="service-status status-loading" id="orders-status">
            <i class="fas fa-spinner fa-spin me-2"></i>Checking...
        </div>
    </div>

    <!-- Inventory Service -->
    <div class="service-card" onclick="navigateToRoute('inventory')">

        <h3 class="service-title">Inventory Management</h3>
        <p class="service-description">
            Monitor ice cream ingredients, dairy supplies, and cone inventory levels
        </p>
        <div class="service-status status-loading" id="inventory-status">
            <i class="fas fa-spinner fa-spin me-2"></i>Checking...
        </div>
    </div>

    <!-- Invoice Service -->
    <div class="service-card" onclick="navigateToRoute('invoice')">

        <h3 class="service-title">Invoice Management</h3>
        <p class="service-description">
            Handle ice cream sales transactions, customer billing, and financial reports
        </p>
        <div class="service-status status-loading" id="invoice-status">
            <i class="fas fa-spinner fa-spin me-2"></i>Checking...
        </div>
    </div>

        <!-- Session Service -->
    <div class="service-card" onclick="Alert.info('Session Management', 'Session management is handled automatically by the system.')">
        <h3 class="service-title">Session Management</h3>
        <p class="service-description">
            Secure staff authentication, user sessions, and access control
        </p>
        <div class="service-status status-loading" id="session-status">
            <i class="fas fa-spinner fa-spin me-2"></i>Checking...
        </div>
    </div>
</div>

<script>
    console.log('üî• DASHBOARD SCRIPT IS LOADING!');
    
    // Dashboard content initialization function
    window.initDashboardContent = async function() {
        console.log('üè† Initializing Dashboard Content...');
        
        try {
            // Time is now handled by main dashboard.html
            console.log('üè† Loading dashboard service status...');
            
            // Load service status for all services
            await loadDashboardServiceStatus();
            
            console.log('‚úÖ Dashboard Content initialized successfully');
        } catch (error) {
            console.error('‚ùå Error initializing dashboard content:', error);
        }
    };

    // Simple time update function (kept for compatibility)
    function updateDashboardTime() {
        const timeElement = document.getElementById('dashboard-time');
        if (timeElement) {
            const now = new Date();
            timeElement.textContent = now.toLocaleTimeString();
        }
    }

    async function loadDashboardServiceStatus() {
        console.log('üìä Loading service status from backend services...');
        
        const services = [
            { id: 'orders', name: 'Orders Service' },
            { id: 'inventory', name: 'Inventory Service' },
            { id: 'invoice', name: 'Invoice Service' },
            { id: 'session', name: 'Session Service' }
        ];
        
        const serviceUrls = getServiceUrls();
        
        for (const service of services) {
            const statusElement = document.getElementById(`${service.id}-status`);
            if (!statusElement) continue;
            
            try {
                let healthUrl;
                
                // Use proper health check endpoints
                if (service.id === 'session') {
                    healthUrl = `${serviceUrls.session}/api/v1/sessions/p/health`;
                } else {
                    healthUrl = `${serviceUrls[service.id]}/api/v1/${service.id}/health`;
                }
                
                console.log(`üîç Checking ${service.name} at ${healthUrl}`);
                
                const response = await fetch(healthUrl, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    // Set a reasonable timeout
                    signal: AbortSignal.timeout(5000)
                });
                
                if (response.ok) {
                    statusElement.className = 'service-status status-online';
                    statusElement.innerHTML = '<i class="fas fa-check-circle me-2"></i>Online';
                    console.log(`‚úÖ ${service.name}: Online`);
                } else {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
            } catch (error) {
                console.error(`‚ùå ${service.name} health check failed:`, error.message);
                statusElement.className = 'service-status status-offline';
                statusElement.innerHTML = '<i class="fas fa-times-circle me-2"></i>Offline';
            }
        }
        
        console.log('‚úÖ Service status loading completed');
    }

</script> 